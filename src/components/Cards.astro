---
const allPosts = Object.values(
    import.meta.glob("../pages/posts/*.md", { eager: true }),
)
---

<div
    class="grid
        gap-6
        sm:grid-cols-2
        lg:grid-cols-3
        mt-5">
    {
        allPosts.map((post: any) => (
            <div class="block rounded-xl border border-gray-200 bg-white p-5 shadow-sm transition hover:shadow-md hover:-translate-y-1">
                <a href={post.url}>
                    <h2 class="text-lg font-semibold text-gray-800 mb-2">
                        {post.frontmatter.title}
                    </h2>
                    <p class="text-sm text-gray-500 line-clamp-3">
                        {post.frontmatter.description ||
                            "Read more about this post."}
                    </p>
                </a>
                <div class="flex flex-wrap gap-2 mt-3 mb-4">
                    {post.frontmatter.tags?.length ? (
                        post.frontmatter.tags.map((tag: string) => (
                            <a
                                href={`/tags/${tag.replace(/\s+/g, "-").toLowerCase()}`}
                                class="inline-block bg-purple-100 text-purple-800 px-3 py-1.5 rounded-full text-sm font-medium hover:bg-purple-200 hover:text-purple-900 transition-all duration-200 shadow-sm border border-purple-200">
                                {tag}
                            </a>
                        ))
                    ) : (
                        <span class="text-gray-400 text-xs italic px-2 py-1">
                            no tags
                        </span>
                    )}
                </div>
                <a
                    href={post.url}
                    class="mt-3 inline-block text-indigo-600 text-sm font-medium">
                    Read More â†’
                </a>
            </div>
        ))
    }
</div>
